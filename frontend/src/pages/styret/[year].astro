---
import BaseLayout from "@layouts/BaseLayout.astro";
import Container from "@components/layout/Container.astro";
import Button from "@components/ui/Button.astro";
import ProfileCard from "@components/ui/ProfileCard.astro";
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import { boardData, availableYears } from "../../data/boardMembers";
import Prose from "@components/semantics/Prose.astro";

export function getStaticPaths() {
  return availableYears.map((year: string) => ({
    params: { year },
  }));
}

const { year } = Astro.params;
const yearData = boardData[year!];
const boardMembers = yearData?.members || [];
const groupPhoto = yearData?.groupPhoto;
---

<BaseLayout title={`Styret ${year}`}>
  <Container>
    <Prose class="mb-8">
      <h1>
        Hovedstyret <span class="text-accent">{year}</span>
      </h1>
      <p>
        Møt de {boardMembers.length} engasjerte studentene som ledet Beta i {year}.
      </p>
    </Prose>

    {
      groupPhoto ? (
        <div class="mb-12 overflow-hidden rounded-2xl">
          <Image src={groupPhoto} alt={`Hovedstyret ${year}`} class="h-96 w-full object-cover" />
        </div>
      ) : (
        <div class="mb-12 flex h-96 items-center justify-center rounded-2xl bg-gradient-to-br from-accent/10 to-accent-secondary/10">
          <div class="text-center">
            <Icon name="fa-solid:camera" class="mx-auto mb-4 h-24 w-24 text-accent" />
            <p class="text-fg-muted dark:text-dark-fg-muted">Styrebilde for {year}</p>
          </div>
        </div>
      )
    }

    <div class="mb-12">
      <h2 class="mb-6 text-3xl font-bold">Styremedlemmer</h2>
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
        {
          boardMembers.map(member => (
            <ProfileCard
              name={member.name}
              role={member.position}
              linkedin={member.linkedin}
              github={member.github}
              picture={member.photo}
            />
          ))
        }
      </div>
    </div>

    <div class="mb-12 text-center">
      <p class="mb-4 text-fg-muted dark:text-dark-fg-muted">
        Vil du ta kontakt med hovedstyret eller har du spørsmål?
      </p>
      <Button href="/kontakt">Kontakt oss</Button>
    </div>
  </Container>
</BaseLayout>
